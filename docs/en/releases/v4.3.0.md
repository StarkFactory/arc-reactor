# v4.3.0

Release date: 2026-02-28

## Highlights

- **Prompt Lab**: Automated prompt evaluation and optimization pipeline with 3-tier evaluation (Structural → Rules-based → LLM Judge), experiment management, and feedback-driven variant promotion.
- **Security hardening (P0)**:
  - JWT secret validated at startup — fails fast when `auth.enabled=true` and secret is empty or shorter than 32 bytes.
  - Multipart upload DoS prevention — configurable per-file size limit (`arc.reactor.multimodal.max-file-size-bytes`, default 10 MB) and per-request file count limit.
  - `X-Tenant-Id` header injection prevention — format validated against `^[a-zA-Z0-9_-]{1,64}$` before processing.
- **CORS + HSTS fixes**:
  - `allowCredentials` default changed from `true` to `false` (opt-in for security).
  - `Strict-Transport-Security: max-age=31536000; includeSubDomains` added to all responses.
- **API documentation**: All 28 REST controllers now annotated with `@ApiResponse` for complete OpenAPI response documentation.
- **Test coverage expansion**:
  - `SlackSocketModeGateway` lifecycle and error handling (37 tests).
  - `AgentTracingHooks` concurrent span lifecycle (48 tests).
  - `TimescaleSpanExporter` JSON escaping and batch persistence (~40 tests).
  - `SlackBackpressureLimiter`, `SlackEventProcessor`, `SlackCommandProcessor` (63 tests).
  - Discord and LINE messaging service unit tests (25 tests).
- **Migration guide**: Comprehensive 3.x → 4.x upgrade guide with 32-item checklist added at `docs/en/releases/migration-3x-to-4x.md`.

## Compatibility and Migration

- No API path changes from `v4.2.x`.
- **CORS breaking change**: If you relied on `allowCredentials=true` as default when enabling CORS, set `arc.reactor.cors.allow-credentials=true` explicitly.
- JWT secret validation is a startup gate — existing deployments with `auth.enabled=true` must ensure `arc.reactor.auth.jwt-secret` is ≥ 32 bytes.
- Refer to `docs/en/releases/migration-3x-to-4x.md` for full 3.x → 4.x migration details.

## Operational Notes

- Tag release workflow publishes signed artifacts with SBOM/checksum/provenance attachments.
- Prompt Lab requires PostgreSQL (experiment and variant tables provisioned via Flyway migrations V24–V25).
