# v3.9.3 Release Notes

Date: 2026-02-18

## Highlights

- Refactored agent execution context wiring for clearer responsibilities.
  - Added `AgentRunContextManager` to centralize `runId`/MDC/hook context setup and teardown.
- Extracted output boundary policy handling into `OutputBoundaryEnforcer`.
  - `ExecutionResultFinalizer` now focuses on orchestration.
- Fixed streaming preflight reject metrics to preserve explicit error codes.
  - Guard reject: `GUARD_REJECTED`
  - Hook reject: `HOOK_REJECTED`
  - Structured-output-in-streaming reject: `INVALID_RESPONSE`
- Added regression tests for new boundary/context components and streaming metrics.

## Operational Impact

- Executor and finalizer code paths are easier to maintain and extend.
- Streaming failure analytics are now consistent with non-streaming classification.

## Upgrade Notes

- Project version is now `3.9.3`.
- Tag `v3.9.3` should be published after merge to trigger release automation.
